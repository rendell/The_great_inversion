<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Great Inversion: Children vs Elderly</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/2.27.0/plotly.min.js"></script>
    <style>
        body { 
            margin: 0; 
            padding: 20px; 
            background: white; 
            font-family: Arial, sans-serif; 
        }
        .chart-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        .pyramid {
            width: 100%;
            height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <div id="pyramid1991" class="pyramid"></div>
        <div id="pyramid2025" class="pyramid"></div>
    </div>
    <script>
        var ageGroups = ['Children (0-14)', 'Elderly (65+)'];
        
        var colors = {
            children: '#3498db',
            elderly: '#c0392b'
        };
        
        // 1991 Data - showing only dependents
        // Children: 22.7%, Elderly: 6.9% of total population
        // As share of dependents: Children 76.7%, Elderly 23.3%
        var pct1991Children = 22.7;
        var pct1991Elderly = 6.9;
        
        var trace1991Left = {
            x: [-pct1991Children/2, -pct1991Elderly/2],
            y: ageGroups,
            type: 'bar',
            orientation: 'h',
            marker: {
                color: [colors.children, colors.elderly]
            },
            hovertemplate: '%{y}<br>%{customdata:.1f}% of population<extra></extra>',
            customdata: [pct1991Children, pct1991Elderly],
            showlegend: false
        };
        
        var trace1991Right = {
            x: [pct1991Children/2, pct1991Elderly/2],
            y: ageGroups,
            type: 'bar',
            orientation: 'h',
            marker: {
                color: [colors.children, colors.elderly]
            },
            hovertemplate: '%{y}<br>%{customdata:.1f}% of population<extra></extra>',
            customdata: [pct1991Children, pct1991Elderly],
            showlegend: false
        };
        
        var layout1991 = {
            title: {
                text: '<b>1991: Traditional Pyramid</b><br><span style="font-size:12px;">Children dominate (77% of dependents)</span>',
                font: { size: 16 }
            },
            barmode: 'overlay',
            xaxis: {
                title: 'Share of Total Population (%)',
                tickvals: [-15, -10, -5, 0, 5, 10, 15],
                ticktext: ['15%', '10%', '5%', '0', '5%', '10%', '15%'],
                gridcolor: '#f0f0f0',
                range: [-15, 15],
                zeroline: true,
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            yaxis: {
                gridcolor: '#f0f0f0',
                categoryorder: 'array',
                categoryarray: ['Children (0-14)', 'Elderly (65+)']
            },
            plot_bgcolor: 'white',
            paper_bgcolor: 'white',
            font: { family: 'Arial, sans-serif' },
            margin: { l: 120, r: 30, t: 80, b: 60 }
        };
        
        // 2025 Data
        var pct2025Children = 15.5;
        var pct2025Elderly = 19.1;
        
        var trace2025Left = {
            x: [-pct2025Children/2, -pct2025Elderly/2],
            y: ageGroups,
            type: 'bar',
            orientation: 'h',
            marker: {
                color: [colors.children, colors.elderly]
            },
            hovertemplate: '%{y}<br>%{customdata:.1f}% of population<extra></extra>',
            customdata: [pct2025Children, pct2025Elderly],
            showlegend: false
        };
        
        var trace2025Right = {
            x: [pct2025Children/2, pct2025Elderly/2],
            y: ageGroups,
            type: 'bar',
            orientation: 'h',
            marker: {
                color: [colors.children, colors.elderly]
            },
            hovertemplate: '%{y}<br>%{customdata:.1f}% of population<extra></extra>',
            customdata: [pct2025Children, pct2025Elderly],
            showlegend: false
        };
        
        var layout2025 = {
            title: {
                text: '<b>2025: THE INVERSION</b><br><span style="font-size:12px;">Elderly now dominate (55% of dependents)</span>',
                font: { size: 16 }
            },
            barmode: 'overlay',
            xaxis: {
                title: 'Share of Total Population (%)',
                tickvals: [-15, -10, -5, 0, 5, 10, 15],
                ticktext: ['15%', '10%', '5%', '0', '5%', '10%', '15%'],
                gridcolor: '#f0f0f0',
                range: [-15, 15],
                zeroline: true,
                zerolinecolor: '#333',
                zerolinewidth: 2
            },
            yaxis: {
                showticklabels: false,
                gridcolor: '#f0f0f0',
                categoryorder: 'array',
                categoryarray: ['Children (0-14)', 'Elderly (65+)']
            },
            plot_bgcolor: 'white',
            paper_bgcolor: 'white',
            font: { family: 'Arial, sans-serif' },
            margin: { l: 30, r: 30, t: 80, b: 60 }
        };
        
        Plotly.newPlot('pyramid1991', [trace1991Left, trace1991Right], layout1991, {responsive: true});
        Plotly.newPlot('pyramid2025', [trace2025Left, trace2025Right], layout2025, {responsive: true});
    </script>
</body>
</html>